<div class="fixed left-0 top-0 h-screen w-96 bg-white/95 backdrop-blur-sm shadow-2xl z-20 overflow-y-auto">
    <div class="p-4">
        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
            <span class="text-2xl">üè†</span>
            List of products
        </h2>
        
        <!-- Category Filter & Sort -->
        <div class="mb-4 space-y-2">
            <!-- Category Filter Dropdown -->
            <div *ngIf="categories.length > 0">
                <button 
                    (click)="toggleCategoryDropdown()"
                    class="w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg
                           flex items-center justify-between hover:border-indigo-400 transition-colors">
                    <span class="text-sm font-medium text-gray-700">Filter by Category</span>
                    <span class="text-gray-500 transition-transform" 
                          [class.rotate-180]="isCategoryDropdownOpen">‚ñº</span>
                </button>
                
                <!-- Dropdown Content -->
                <div *ngIf="isCategoryDropdownOpen" 
                     class="mt-2 bg-white border-2 border-gray-200 rounded-lg p-2 space-y-1">
                    <label *ngFor="let category of categories" 
                           class="flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer">
                        <input 
                            type="checkbox"
                            [checked]="selectedCategories.has(category)"
                            (change)="toggleCategory(category)"
                            class="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"
                        />
                        <span class="text-sm text-gray-700 capitalize">{{ category }}</span>
                    </label>
                </div>
            </div>

            <!-- Sort By Dropdown -->
            <div class="flex items-center gap-2">
                <label class="text-sm font-medium text-gray-700 whitespace-nowrap">Sort by:</label>
                <select 
                    [(ngModel)]="sortBy"
                    (change)="onSortChange()"
                    class="flex-1 px-3 py-2 bg-white border-2 border-gray-300 rounded-lg
                           focus:border-indigo-500 focus:outline-none cursor-pointer text-sm">
                    <option value="name">Name</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                </select>
            </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-8">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"></div>
            <p class="mt-4 text-gray-600">Loading products...</p>
        </div>

        <!-- Error State -->
        <div *ngIf="errorMessage" class="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700">
            {{ errorMessage }}
        </div>

        <!-- Products Grid (Two Columns) -->
        <div class="grid grid-cols-2 gap-2" *ngIf="!isLoading && !errorMessage">
            <div 
                *ngFor="let item of filteredItems"
                draggable="true"
                (dragstart)="onDragStart($event, item)"
                (click)="onItemClick(item)"
                class="p-2 bg-gradient-to-r from-gray-50 to-gray-100 
                       hover:from-indigo-50 hover:to-purple-50
                       border-2 border-gray-200 hover:border-indigo-400
                       rounded-lg transition-all duration-200
                       flex flex-col items-center gap-2 cursor-grab
                       active:cursor-grabbing
                       shadow-sm hover:shadow-md
                       transform hover:-translate-y-0.5
                       active:translate-y-0">
                <!-- Product Image -->
                <img 
                    [src]="item.imageUrl" 
                    [alt]="item.displayName"
                    class="w-full h-32 object-cover rounded-md bg-gray-200 pointer-events-none"
                    (error)="$any($event.target).src='https://via.placeholder.com/150?text=No+Image'"
                />
                
                <!-- Product Info -->
                <div class="w-full text-center pointer-events-none">
                    <div class="text-xs font-semibold text-gray-700 line-clamp-2">{{ item.displayName }}</div>
                    <div class="text-xs text-indigo-600 font-bold mt-1">‚Ç¨{{ item.price }}</div>
                </div>
            </div>
        </div>
    </div>
</div>
